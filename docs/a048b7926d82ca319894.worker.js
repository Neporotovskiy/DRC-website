!function(t){var e={};function r(n){if(e[n])return e[n].exports;var u=e[n]={i:n,l:!1,exports:{}};return t[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)r.d(n,u,function(e){return t[e]}.bind(null,u));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="xmC6")}({p4U6:function(t,e,r){self,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var u=e[n]={i:n,l:!1,exports:{}};return t[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)r.d(n,u,function(e){return t[e]}.bind(null,u));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t,e){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=e,u=!1,o=0;!u;){n<=0&&(u=!0);var s=t.find(function(t){return Number(t.length)===Number(n.toFixed(r))});void 0!==s&&(u=!0,o=s),n-=Math.pow(10,-r)}return o}function u(t,e){var r=t.findIndex(function(t){return t.index===e.index});0<=r&&t.splice(r,1)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,u=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){u=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(u)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.r(e),r.d(e,"DelmaResourceCalculatorCore",function(){return a});var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.output=null,this.logger=function(){}}var e,r;return e=t,(r=[{key:"setLogger",value:function(t){return this.logger=t,this}},{key:"setAssetLength",value:function(t){return this.assetLength=t,this.logger({step:1,status:1}),this}},{key:"setCuttingEdgeWidth",value:function(t){return this.cuttingEdge=t,this.logger({step:2,status:1}),this}},{key:"setCalculationAccuracy",value:function(t){return this.calculationAccuracy=t,this.logger({step:3,status:1}),this}},{key:"calculate",value:function(t){try{var e=function(t){try{var e=[];return t.forEach(function(t,r){for(var n=t.length,u=t.number,o=0;o<u;o++)e.push({index:r,length:n})}),e.sort(function(t,e){return e.length-t.length}),{err:null,result:e}}catch(t){return{err:t,result:null}}}(this.data),r=e.err,s=e.result;if(r)return this.logger({step:4,status:0,error:r}),this;this.logger({step:4,status:1});var a=function(t,e){var r,s=e.assetLength,a=e.cuttingEdge,l=e.calculationAccuracy;try{var i=function(t){return t.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){var n,u,o;n=t,o=r[u=e],u in n?Object.defineProperty(n,u,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[u]=o})}return t}({},t)})}(t),c=[],f=[];do{if(0<f.length){var g=0===(r=f).length?0:r.reduce(function(t,e){return t+e.length},0),h=s-a*f.length-g;if(0<h){var p=n(i,h,l);p?(u(i,p),f.push(p)):(c.push(f),f=[])}else c.push(f),f=[]}else{var d=o(i,1)[0];f.push(d),u(i,d)}0===i.length&&c.push(f)}while(0<i.length);return{err:null,result:c}}catch(t){return{err:t,result:null}}}(s,{assetLength:this.assetLength,cuttingEdge:this.cuttingEdge,calculationAccuracy:this.calculationAccuracy}),l=a.err,i=a.result;if(l)return this.logger({step:5,status:0,error:l}),this;this.logger({step:5,status:1});var c=function(t){try{var e={},r=[];return t.forEach(function(t){var r="";t.forEach(function(t){r+=t.index}),r in e?e[r].push(t):e[r]=[t]}),Object.values(e).forEach(function(t){r.push({group:t[0],number:t.length})}),{err:null,result:r}}catch(t){return{err:t,result:null}}}(i),f=c.err,g=c.result;if(f)return this.logger({step:6,status:0,error:f}),this;this.logger({step:6,status:1});var h=function(t,e){try{var r=[];return t.forEach(function(t){var n=t.group,u=t.number,o=[];n.forEach(function(t){var r=t.index;o.push(e[r])}),r.push({group:o,number:u})}),{err:null,result:r}}catch(t){return{err:t,result:null}}}(g,this.data),p=h.err,d=h.result;if(p)return this.logger({step:7,status:0,error:p}),this;this.logger({step:7,status:1}),t(this.output=d),this.logger({step:8,status:1})}catch(t){this.output=null,this.logger({step:8,status:0,error:t})}return this}},{key:"analyze",value:function(t){var e=this;if(null===this.output)return this;try{var r=null,n=null;try{this.logger({step:9,status:1}),r=this.output.reduce(function(t,e){return t+e.number},0),n=this.output.reduce(function(t,r){var n=r.group,u=n.reduce(function(t,e){return t+e.length},0);return t+(e.assetLength-u-(n.length-e.cuttingEdge))},0)}catch(t){this.logger({step:9,status:0,error:t})}t({totalConsumption:r,totalWaste:n}),this.logger({step:10,status:1})}catch(t){this.logger({step:10,status:0,error:t})}return this}}])&&s(e.prototype,r),t}()}])},xmC6:function(t,e,r){"use strict";r.r(e);var n=r("p4U6");self.addEventListener("message",({data:{label:t,...e}})=>{switch(t){case"run":!function({blueprints:t,assetLength:e,calculationAccuracy:r,cuttingEdge:u}){new n.DelmaResourceCalculatorCore(t).setLogger(({step:t,error:e})=>{const r=void 0!==e;r?self.postMessage({label:"error",data:e.message}):self.postMessage({label:"status",data:t})}).setAssetLength(e).setCalculationAccuracy(r).setCuttingEdgeWidth(u).calculate(t=>{self.postMessage({label:"calculations",data:t})}).analyze(t=>{self.postMessage({label:"analysis",data:t}),self.close()})}(e);break;default:self.postMessage({label:"error",data:"Unknown message received by worker instance"})}})}});